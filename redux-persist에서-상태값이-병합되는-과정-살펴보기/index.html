<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 3.12.1"/><title data-react-helmet="true">Redux-Persist에서 상태값이 병합되는 과정 살펴보기 | Brandon.dev</title><link data-react-helmet="true" rel="icon" type="image/png" sizes="16*16" href="/favicon-16x16.png"/><link data-react-helmet="true" rel="icon" type="image/png" sizes="32*32" href="/favicon-32x32.png"/><link data-react-helmet="true" rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><meta data-react-helmet="true" name="description" content="Persist Store의 상태 객체 구조가 변하면서 발생한 상태값 충돌을 대비한 경험을 정리합니다."/><meta data-react-helmet="true" name="image" content="https://youthfulhps.github.io/banner.png"/><meta data-react-helmet="true" property="og:title" content="Redux-Persist에서 상태값이 병합되는 과정 살펴보기"/><meta data-react-helmet="true" property="og:url" content="https://youthfulhps.github.io/redux-persist에서-상태값이-병합되는-과정-살펴보기"/><meta data-react-helmet="true" property="og:description" content="Persist Store의 상태 객체 구조가 변하면서 발생한 상태값 충돌을 대비한 경험을 정리합니다."/><meta data-react-helmet="true" property="og:image" content="https://youthfulhps.github.io/banner.png"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:image:alt" content="Persist Store의 상태 객체 구조가 변하면서 발생한 상태값 충돌을 대비한 경험을 정리합니다."/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:title" content="Redux-Persist에서 상태값이 병합되는 과정 살펴보기"/><meta data-react-helmet="true" name="twitter:url" content="https://youthfulhps.github.io/redux-persist에서-상태값이-병합되는-과정-살펴보기"/><meta data-react-helmet="true" name="twitter:description" content="Persist Store의 상태 객체 구조가 변하면서 발생한 상태값 충돌을 대비한 경험을 정리합니다."/><meta data-react-helmet="true" name="twitter:image" content="https://youthfulhps.github.io/banner.png"/><meta data-react-helmet="true" name="twitter:image:alt" content="Persist Store의 상태 객체 구조가 변하면서 발생한 상태값 충돌을 대비한 경험을 정리합니다."/><meta data-react-helmet="true" name="twitter:creator" content="유병호"/><meta data-react-helmet="true" name="gatsby-theme" content="@lekoarts/gatsby-theme-minimal-blog"/><meta data-react-helmet="true" name="google-site-verification" content="f4EOADBHWVbkr4BqV6haLgZMxergowHY9ngPC-fMY0M"/><link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#F1F5FF"/><link rel="apple-touch-icon" sizes="192x192" href="/android-chrome-192x192.png"/><link rel="apple-touch-icon" sizes="512x512" href="/android-chrome-512x512.png"/><link rel="alternate" type="application/rss+xml" title="브랜든 기술 블로그" href="/rss.xml"/><link as="script" rel="preload" href="/webpack-runtime-98aa62c53ebfb5c24e72.js"/><link as="script" rel="preload" href="/framework-f3a47ef4a22d24b14274.js"/><link as="script" rel="preload" href="/app-9fb5d100fc8b629a137d.js"/><link as="script" rel="preload" href="/aed2e917f30c051bccba91aa15989a75fd0bd633-7f9d1a61112c71c5629a.js"/><link as="script" rel="preload" href="/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-df0e23e2bcc1071b8546.js"/><link as="fetch" rel="preload" href="/page-data/redux-persist에서-상태값이-병합되는-과정-살펴보기/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2744905544.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3090400250.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/318001574.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><script>(function() { try {
  var mode = localStorage.getItem('theme-ui-color-mode');
  if (!mode) return
  document.documentElement.classList.add('theme-ui-' + mode);
  document.body.classList.add('theme-ui-' + mode);
} catch (e) {} })();</script><div id="___gatsby"><style data-emotion="css-global 1609b3k">html{--theme-ui-colors-transparent:transparent;--theme-ui-colors-black:#000;--theme-ui-colors-white:#fff;--theme-ui-colors-gray-1:#f7fafc;--theme-ui-colors-gray-2:#edf2f7;--theme-ui-colors-gray-3:#e2e8f0;--theme-ui-colors-gray-4:#cbd5e0;--theme-ui-colors-gray-5:#a0aec0;--theme-ui-colors-gray-6:#718096;--theme-ui-colors-gray-7:#4a5568;--theme-ui-colors-gray-8:#2d3748;--theme-ui-colors-gray-9:#1a202c;--theme-ui-colors-red-1:#fff5f5;--theme-ui-colors-red-2:#fed7d7;--theme-ui-colors-red-3:#feb2b2;--theme-ui-colors-red-4:#fc8181;--theme-ui-colors-red-5:#f56565;--theme-ui-colors-red-6:#e53e3e;--theme-ui-colors-red-7:#c53030;--theme-ui-colors-red-8:#9b2c2c;--theme-ui-colors-red-9:#742a2a;--theme-ui-colors-orange-1:#fffaf0;--theme-ui-colors-orange-2:#feebc8;--theme-ui-colors-orange-3:#fbd38d;--theme-ui-colors-orange-4:#f6ad55;--theme-ui-colors-orange-5:#ed8936;--theme-ui-colors-orange-6:#dd6b20;--theme-ui-colors-orange-7:#c05621;--theme-ui-colors-orange-8:#9c4221;--theme-ui-colors-orange-9:#7b341e;--theme-ui-colors-yellow-1:#fffff0;--theme-ui-colors-yellow-2:#fefcbf;--theme-ui-colors-yellow-3:#faf089;--theme-ui-colors-yellow-4:#f6e05e;--theme-ui-colors-yellow-5:#ecc94b;--theme-ui-colors-yellow-6:#d69e2e;--theme-ui-colors-yellow-7:#b7791f;--theme-ui-colors-yellow-8:#975a16;--theme-ui-colors-yellow-9:#744210;--theme-ui-colors-green-1:#f0fff4;--theme-ui-colors-green-2:#c6f6d5;--theme-ui-colors-green-3:#9ae6b4;--theme-ui-colors-green-4:#68d391;--theme-ui-colors-green-5:#48bb78;--theme-ui-colors-green-6:#38a169;--theme-ui-colors-green-7:#2f855a;--theme-ui-colors-green-8:#276749;--theme-ui-colors-green-9:#22543d;--theme-ui-colors-teal-1:#e6fffa;--theme-ui-colors-teal-2:#b2f5ea;--theme-ui-colors-teal-3:#81e6d9;--theme-ui-colors-teal-4:#4fd1c5;--theme-ui-colors-teal-5:#38b2ac;--theme-ui-colors-teal-6:#319795;--theme-ui-colors-teal-7:#2c7a7b;--theme-ui-colors-teal-8:#285e61;--theme-ui-colors-teal-9:#234e52;--theme-ui-colors-blue-1:#ebf8ff;--theme-ui-colors-blue-2:#bee3f8;--theme-ui-colors-blue-3:#90cdf4;--theme-ui-colors-blue-4:#63b3ed;--theme-ui-colors-blue-5:#4299e1;--theme-ui-colors-blue-6:#3182ce;--theme-ui-colors-blue-7:#2b6cb0;--theme-ui-colors-blue-8:#2c5282;--theme-ui-colors-blue-9:#2a4365;--theme-ui-colors-indigo-1:#ebf4ff;--theme-ui-colors-indigo-2:#c3dafe;--theme-ui-colors-indigo-3:#a3bffa;--theme-ui-colors-indigo-4:#7f9cf5;--theme-ui-colors-indigo-5:#667eea;--theme-ui-colors-indigo-6:#5a67d8;--theme-ui-colors-indigo-7:#4c51bf;--theme-ui-colors-indigo-8:#434190;--theme-ui-colors-indigo-9:#3c366b;--theme-ui-colors-purple-1:#faf5ff;--theme-ui-colors-purple-2:#e9d8fd;--theme-ui-colors-purple-3:#d6bcfa;--theme-ui-colors-purple-4:#b794f4;--theme-ui-colors-purple-5:#9f7aea;--theme-ui-colors-purple-6:#805ad5;--theme-ui-colors-purple-7:#6b46c1;--theme-ui-colors-purple-8:#553c9a;--theme-ui-colors-purple-9:#44337a;--theme-ui-colors-pink-1:#fff5f7;--theme-ui-colors-pink-2:#fed7e2;--theme-ui-colors-pink-3:#fbb6ce;--theme-ui-colors-pink-4:#f687b3;--theme-ui-colors-pink-5:#ed64a6;--theme-ui-colors-pink-6:#d53f8c;--theme-ui-colors-pink-7:#b83280;--theme-ui-colors-pink-8:#97266d;--theme-ui-colors-pink-9:#702459;--theme-ui-colors-grayDark:#2d3748;--theme-ui-colors-text:#2d3748;--theme-ui-colors-background:#ffffff;--theme-ui-colors-primary:#6b46c1;--theme-ui-colors-primaryHover:#2c5282;--theme-ui-colors-secondary:#5f6c80;--theme-ui-colors-muted:#e2e8f0;--theme-ui-colors-success:#9ae6b4;--theme-ui-colors-info:#63b3ed;--theme-ui-colors-warning:#faf089;--theme-ui-colors-danger:#feb2b2;--theme-ui-colors-light:#f7fafc;--theme-ui-colors-dark:#2d3748;--theme-ui-colors-textMuted:#718096;--theme-ui-colors-toggleIcon:#2d3748;--theme-ui-colors-heading:#000;--theme-ui-colors-divide:#cbd5e0;color:var(--theme-ui-colors-text);background-color:var(--theme-ui-colors-background);}html.theme-ui-__default{--theme-ui-colors-transparent:transparent;--theme-ui-colors-black:#000;--theme-ui-colors-white:#fff;--theme-ui-colors-gray-1:#f7fafc;--theme-ui-colors-gray-2:#edf2f7;--theme-ui-colors-gray-3:#e2e8f0;--theme-ui-colors-gray-4:#cbd5e0;--theme-ui-colors-gray-5:#a0aec0;--theme-ui-colors-gray-6:#718096;--theme-ui-colors-gray-7:#4a5568;--theme-ui-colors-gray-8:#2d3748;--theme-ui-colors-gray-9:#1a202c;--theme-ui-colors-red-1:#fff5f5;--theme-ui-colors-red-2:#fed7d7;--theme-ui-colors-red-3:#feb2b2;--theme-ui-colors-red-4:#fc8181;--theme-ui-colors-red-5:#f56565;--theme-ui-colors-red-6:#e53e3e;--theme-ui-colors-red-7:#c53030;--theme-ui-colors-red-8:#9b2c2c;--theme-ui-colors-red-9:#742a2a;--theme-ui-colors-orange-1:#fffaf0;--theme-ui-colors-orange-2:#feebc8;--theme-ui-colors-orange-3:#fbd38d;--theme-ui-colors-orange-4:#f6ad55;--theme-ui-colors-orange-5:#ed8936;--theme-ui-colors-orange-6:#dd6b20;--theme-ui-colors-orange-7:#c05621;--theme-ui-colors-orange-8:#9c4221;--theme-ui-colors-orange-9:#7b341e;--theme-ui-colors-yellow-1:#fffff0;--theme-ui-colors-yellow-2:#fefcbf;--theme-ui-colors-yellow-3:#faf089;--theme-ui-colors-yellow-4:#f6e05e;--theme-ui-colors-yellow-5:#ecc94b;--theme-ui-colors-yellow-6:#d69e2e;--theme-ui-colors-yellow-7:#b7791f;--theme-ui-colors-yellow-8:#975a16;--theme-ui-colors-yellow-9:#744210;--theme-ui-colors-green-1:#f0fff4;--theme-ui-colors-green-2:#c6f6d5;--theme-ui-colors-green-3:#9ae6b4;--theme-ui-colors-green-4:#68d391;--theme-ui-colors-green-5:#48bb78;--theme-ui-colors-green-6:#38a169;--theme-ui-colors-green-7:#2f855a;--theme-ui-colors-green-8:#276749;--theme-ui-colors-green-9:#22543d;--theme-ui-colors-teal-1:#e6fffa;--theme-ui-colors-teal-2:#b2f5ea;--theme-ui-colors-teal-3:#81e6d9;--theme-ui-colors-teal-4:#4fd1c5;--theme-ui-colors-teal-5:#38b2ac;--theme-ui-colors-teal-6:#319795;--theme-ui-colors-teal-7:#2c7a7b;--theme-ui-colors-teal-8:#285e61;--theme-ui-colors-teal-9:#234e52;--theme-ui-colors-blue-1:#ebf8ff;--theme-ui-colors-blue-2:#bee3f8;--theme-ui-colors-blue-3:#90cdf4;--theme-ui-colors-blue-4:#63b3ed;--theme-ui-colors-blue-5:#4299e1;--theme-ui-colors-blue-6:#3182ce;--theme-ui-colors-blue-7:#2b6cb0;--theme-ui-colors-blue-8:#2c5282;--theme-ui-colors-blue-9:#2a4365;--theme-ui-colors-indigo-1:#ebf4ff;--theme-ui-colors-indigo-2:#c3dafe;--theme-ui-colors-indigo-3:#a3bffa;--theme-ui-colors-indigo-4:#7f9cf5;--theme-ui-colors-indigo-5:#667eea;--theme-ui-colors-indigo-6:#5a67d8;--theme-ui-colors-indigo-7:#4c51bf;--theme-ui-colors-indigo-8:#434190;--theme-ui-colors-indigo-9:#3c366b;--theme-ui-colors-purple-1:#faf5ff;--theme-ui-colors-purple-2:#e9d8fd;--theme-ui-colors-purple-3:#d6bcfa;--theme-ui-colors-purple-4:#b794f4;--theme-ui-colors-purple-5:#9f7aea;--theme-ui-colors-purple-6:#805ad5;--theme-ui-colors-purple-7:#6b46c1;--theme-ui-colors-purple-8:#553c9a;--theme-ui-colors-purple-9:#44337a;--theme-ui-colors-pink-1:#fff5f7;--theme-ui-colors-pink-2:#fed7e2;--theme-ui-colors-pink-3:#fbb6ce;--theme-ui-colors-pink-4:#f687b3;--theme-ui-colors-pink-5:#ed64a6;--theme-ui-colors-pink-6:#d53f8c;--theme-ui-colors-pink-7:#b83280;--theme-ui-colors-pink-8:#97266d;--theme-ui-colors-pink-9:#702459;--theme-ui-colors-grayDark:#2d3748;--theme-ui-colors-text:#2d3748;--theme-ui-colors-background:#ffffff;--theme-ui-colors-primary:#6b46c1;--theme-ui-colors-primaryHover:#2c5282;--theme-ui-colors-secondary:#5f6c80;--theme-ui-colors-muted:#e2e8f0;--theme-ui-colors-success:#9ae6b4;--theme-ui-colors-info:#63b3ed;--theme-ui-colors-warning:#faf089;--theme-ui-colors-danger:#feb2b2;--theme-ui-colors-light:#f7fafc;--theme-ui-colors-dark:#2d3748;--theme-ui-colors-textMuted:#718096;--theme-ui-colors-toggleIcon:#2d3748;--theme-ui-colors-heading:#000;--theme-ui-colors-divide:#cbd5e0;}html.theme-ui-dark{--theme-ui-colors-text:#cbd5e0;--theme-ui-colors-primary:#9f7aea;--theme-ui-colors-secondary:#7f8ea3;--theme-ui-colors-toggleIcon:#cbd5e0;--theme-ui-colors-background:#1A202C;--theme-ui-colors-heading:#fff;--theme-ui-colors-divide:#2d3748;--theme-ui-colors-muted:#2d3748;}</style><style data-emotion="css-global 1j0yc2g">*{box-sizing:border-box;}html{font-family:"IBM Plex Sans",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.625;font-weight:400;color:var(--theme-ui-colors-text);background-color:var(--theme-ui-colors-background);margin:0;padding:0;box-sizing:border-box;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}body{margin:0;}</style><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion="css-global a8oirg">@import url(//spoqa.github.io/spoqa-han-sans/css/SpoqaHanSans-kr.css);@import url(//fonts.googleapis.com/css?family=Monoton|Nanum+Gothic&display=swap);@font-face{font-family:"Pretendard-Regular";src:url("https://cdn.jsdelivr.net/gh/Project-Noonnu/noonfonts_2107@1.1/Pretendard-Regular.woff") format("woff");font-weight:400;font-style:normal;}*{box-sizing:border-box;}html{-webkit-text-size-adjust:100%;}a{-webkit-transition:all 0.3s ease-in-out;transition:all 0.3s ease-in-out;}body{font-family:"Pretendard-Regular","Spoqa Han Sans","Nanum Gothic",sans-serif;-webkit-font-smoothing:antialiased!important;text-rendering:optimizeLegibility!important;}::selection{background-color:var(--theme-ui-colors-text);color:var(--theme-ui-colors-background);}</style><style data-emotion="css 1gq7j3t">.css-1gq7j3t{border:0;clip:react(0 0 0 0);height:1px;width:1px;margin:-1px;padding:0;overflow:hidden;position:absolute;}.css-1gq7j3t:focus{padding:1rem;position:fixed;top:15px;left:15px;background-color:var(--theme-ui-colors-heading);color:var(--theme-ui-colors-background);z-index:1;width:auto;height:auto;clip:auto;-webkit-text-decoration:none;text-decoration:none;}</style><a href="#skip-nav" data-skip-link="true" class="css-1gq7j3t">Skip to content</a><style data-emotion="css lwv6jv">.css-lwv6jv{box-sizing:border-box;margin:0;min-width:0;width:100%;max-width:container;margin-left:auto;margin-right:auto;padding:1rem;max-width:760px;}@media screen and (min-width: 640px){.css-lwv6jv{padding:2rem;}}</style><div class="css-lwv6jv"><header><style data-emotion="css 1xwyizx">.css-1xwyizx{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;}</style><style data-emotion="css 10klvkd">.css-10klvkd{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;}</style><div class="css-10klvkd"><style data-emotion="css 6xz4ps">.css-6xz4ps{color:var(--theme-ui-colors-heading);}</style><style data-emotion="css yet5f3">.css-yet5f3{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-text-decoration:none;text-decoration:none;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:black;color:var(--theme-ui-colors-heading);}</style><a aria-label="Brandon.dev - Back to home" class="css-yet5f3" href="/"><style data-emotion="css 1vfq007">.css-1vfq007{width:36px;}</style><img src="/static/hero-31b759d44f9f561a2f5e6738185baec9.png" class="css-1vfq007"/><style data-emotion="css g90fw7">.css-g90fw7{font-weight:700;}</style><div class="css-g90fw7">Brandon.dev</div></a><style data-emotion="css zut31r">.css-zut31r{opacity:0.65;position:relative;border-radius:5px;width:40px;height:25px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-transition:opacity 0.3s ease;transition:opacity 0.3s ease;border:none;outline:none;background:none;cursor:pointer;padding:0;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;}.css-zut31r:hover,.css-zut31r:focus{opacity:1;}</style><button type="button" aria-label="Activate Dark Mode" title="Activate Dark Mode" class="css-zut31r"><style data-emotion="css 1m6u41m">.css-1m6u41m{position:relative;width:24px;height:24px;border-radius:50%;border:none;background-color:var(--theme-ui-colors-transparent);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1);-webkit-transition:all 0.45s ease;transition:all 0.45s ease;overflow:hidden;box-shadow:inset 8px -8px 0px 0px var(--theme-ui-colors-toggleIcon);}.css-1m6u41m:before{content:"";position:absolute;right:-9px;top:-9px;height:24px;width:24px;border:none;border-radius:50%;-webkit-transform:translate(0, 0);-moz-transform:translate(0, 0);-ms-transform:translate(0, 0);transform:translate(0, 0);opacity:1;-webkit-transition:-webkit-transform 0.45s ease;transition:transform 0.45s ease;}.css-1m6u41m:after{content:"";width:8px;height:8px;border-radius:50%;margin:-4px 0 0 -4px;position:absolute;top:50%;left:50%;box-shadow:0 -23px 0 var(--theme-ui-colors-toggleIcon),0 23px 0 var(--theme-ui-colors-toggleIcon),23px 0 0 var(--theme-ui-colors-toggleIcon),-23px 0 0 var(--theme-ui-colors-toggleIcon),15px 15px 0 var(--theme-ui-colors-toggleIcon),-15px 15px 0 var(--theme-ui-colors-toggleIcon),15px -15px 0 var(--theme-ui-colors-toggleIcon),-15px -15px 0 var(--theme-ui-colors-toggleIcon);-webkit-transform:scale(0);-moz-transform:scale(0);-ms-transform:scale(0);transform:scale(0);-webkit-transition:all 0.35s ease;transition:all 0.35s ease;}</style><div class="css-1m6u41m"></div></button></div><style data-emotion="css fp1v3n">.css-fp1v3n{box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;border-bottom-style:solid;border-bottom-width:1px;border-bottom-color:var(--theme-ui-colors-divide);padding-bottom:1rem;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin-top:1rem;color:var(--theme-ui-colors-secondary);-webkit-box-flex-flow:wrap;-webkit-flex-flow:wrap;-ms-flex-flow:wrap;flex-flow:wrap;}.css-fp1v3n a{color:var(--theme-ui-colors-secondary);}.css-fp1v3n a:hover{color:var(--theme-ui-colors-heading);}</style><div class="css-fp1v3n"><style data-emotion="css 1lx5s1f">.css-1lx5s1f{font-size:1rem;}.css-1lx5s1f a:not(:last-of-type){margin-right:1rem;}@media screen and (min-width: 640px){.css-1lx5s1f{font-size:18px;}}.css-1lx5s1f .active{color:var(--theme-ui-colors-heading);}</style><nav class="css-1lx5s1f"><style data-emotion="css 1fmmdck">.css-1fmmdck{box-sizing:border-box;margin:0;min-width:0;color:var(--theme-ui-colors-primary);-webkit-text-decoration:none;text-decoration:none;}.css-1fmmdck:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><a class="css-1fmmdck" href="/about">About</a><a class="css-1fmmdck" href="/blog">Blog</a></nav></div></header><style data-emotion="css wmcuic">.css-wmcuic [data-name='live-editor']{padding:0.5rem!important;font-family:'menlo','monaco','monospace';font-size:0.5px;}.css-wmcuic [data-name='live-preview']{padding:calc(0.5rem + 10px)!important;font-family:'menlo','monaco','monospace';background-color:#d2c7ec;}.css-wmcuic .prism-code{font-size:14px;padding:2rem 1rem 1rem 1rem;webkit-overflow-scrolling:touch;background-color:var(--theme-ui-colors-transparent);min-width:100%;margin-bottom:0;margin-top:0;overflow:auto;}.css-wmcuic .prism-code[data-linenumber="false"] .token-line{padding-left:1rem;}.css-wmcuic .gatsby-highlight[data-language=''] .prism-code,.css-wmcuic .gatsby-highlight[data-language='noLineNumbers'] .prism-code{padding-top:1rem;}.css-wmcuic .token{display:inline-block;}.css-wmcuic p>code,.css-wmcuic li>code{background-color:var(--theme-ui-colors-gray-2);color:var(--theme-ui-colors-gray-8);padding-left:0.5rem;padding-right:0.5rem;padding-top:0.25rem;padding-bottom:0.25rem;border-radius:2px;}.css-wmcuic .gatsby-highlight{font-size:1rem;position:relative;webkit-overflow-scrolling:touch;background-color:rgb(1, 22, 39);border-radius:2px;margin-left:0;margin-right:0;}@media screen and (min-width: 640px){.css-wmcuic .gatsby-highlight{font-size:1rem;margin-left:0;margin-right:0;}}@media screen and (min-width: 768px){.css-wmcuic .gatsby-highlight{font-size:1.25rem;margin-left:0;margin-right:0;}}@media screen and (min-width: 1024px){.css-wmcuic .gatsby-highlight{margin-left:-1rem;margin-right:-1rem;}}.css-wmcuic .gatsby-highlight .token-line{margin-left:-1rem;margin-right:-1rem;min-width:100%;}.css-wmcuic .gatsby-highlight pre code{float:left;min-width:100%;}.css-wmcuic .gatsby-highlight pre[class*="language-"]:before{background-color:var(--theme-ui-colors-white);border-radius:0 0 0.25rem 0.25rem;color:var(--theme-ui-colors-black);font-size:12px;letter-spacing:0.025rem;padding:0.1rem 0.5rem;position:absolute;left:1rem;text-align:right;text-transform:uppercase;top:0;}.css-wmcuic .gatsby-highlight pre[class~="language-javascript"]:before,.css-wmcuic .gatsby-highlight pre[class~="language-js"]:before{content:"js";background:#f7df1e;color:var(--theme-ui-colors-black);}.css-wmcuic .gatsby-highlight pre[class~="language-jsx"]:before{content:"jsx";background:#61dafb;color:var(--theme-ui-colors-black);}.css-wmcuic .gatsby-highlight pre[class~="language-ts"]:before{content:"ts";background:#61dafb;color:var(--theme-ui-colors-black);}.css-wmcuic .gatsby-highlight pre[class~="language-tsx"]:before{content:"tsx";background:#61dafb;color:var(--theme-ui-colors-black);}.css-wmcuic .gatsby-highlight pre[class~="language-html"]:before{content:"html";background:#005a9c;color:var(--theme-ui-colors-white);}.css-wmcuic .gatsby-highlight pre[class~="language-xml"]:before{content:"xml";background:#005a9c;color:var(--theme-ui-colors-white);}.css-wmcuic .gatsby-highlight pre[class~="language-svg"]:before{content:"svg";background:#005a9c;color:var(--theme-ui-colors-white);}.css-wmcuic .gatsby-highlight pre[class~="language-graphql"]:before{content:"GraphQL";background:#E10098;}.css-wmcuic .gatsby-highlight pre[class~="language-css"]:before{content:"css";background:#ff9800;color:var(--theme-ui-colors-black);}.css-wmcuic .gatsby-highlight pre[class~="language-mdx"]:before{content:"mdx";background:#f9ac00;color:var(--theme-ui-colors-black);}.css-wmcuic .gatsby-highlight pre[class~="language-php"]:before{content:"php";background:#777bb3;color:var(--theme-ui-colors-black);}.css-wmcuic .gatsby-highlight pre[class~="language-py"]:before,.css-wmcuic .gatsby-highlight pre[class~="language-python"]:before{content:"py";background:#306998;color:var(--theme-ui-colors-white);}.css-wmcuic .gatsby-highlight pre[class~="language-text"]:before{content:"text";}.css-wmcuic .gatsby-highlight pre[class~='language-shell']:before{content:'shell';}.css-wmcuic .gatsby-highlight pre[class~='language-sh']:before{content:'sh';}.css-wmcuic .gatsby-highlight pre[class~='language-bash']:before{content:'bash';}.css-wmcuic .gatsby-highlight pre[class~='language-yaml']:before{content:'yaml';background:#ffa8df;}.css-wmcuic .gatsby-highlight pre[class~='language-yml']:before{content:'yml';background:#ffa8df;}.css-wmcuic .gatsby-highlight pre[class~='language-markdown']:before{content:'md';}.css-wmcuic .gatsby-highlight pre[class~='language-json']:before,.css-wmcuic .gatsby-highlight pre[class~='language-json5']:before{content:'json';background:linen;}.css-wmcuic .gatsby-highlight pre[class~='language-diff']:before{content:'diff';background:#e6ffed;}.css-wmcuic .gatsby-highlight>code[class*="language-"],.css-wmcuic .gatsby-highlight>pre[class=*="language-"]{word-spacing:normal;word-break:normal;overflow-wrap:normal;line-height:1.5;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;}.css-wmcuic .gatsby-highlight pre::-webkit-scrollbar{width:0.5rem;height:0.5rem;}.css-wmcuic .gatsby-highlight pre::-webkit-scrollbar-thumb{background-color:var(--theme-ui-colors-primary);}.css-wmcuic .gatsby-highlight pre::-webkit-scrollbar-track{background:rgb(1, 22, 39);}.css-wmcuic .line-number-style{display:inline-block;width:3em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:0.3;text-align:center;position:relative;}.css-wmcuic .code-title{background-color:#d2c7ec;color:var(--theme-ui-colors-black);font-size:0.875rem;padding-left:1rem;padding-right:1rem;padding-top:0.5rem;padding-bottom:0.5rem;font-family:Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;margin-left:0;margin-right:0;}@media screen and (min-width: 640px){.css-wmcuic .code-title{margin-left:0;margin-right:0;}}@media screen and (min-width: 768px){.css-wmcuic .code-title{margin-left:0;margin-right:0;}}@media screen and (min-width: 1024px){.css-wmcuic .code-title{margin-left:-1rem;margin-right:-1rem;}}.css-wmcuic .token-line{padding-right:1rem;}.css-wmcuic .highlight-line{background-color:rgb(2, 55, 81);border-left:4px solid rgb(2, 155, 206);}.css-wmcuic .highlight-line .line-number-style{width:calc(3em - 4px);opacity:0.5;left:-2px;}.css-wmcuic .react-live-wrapper{position:relative;}.css-wmcuic .react-live-wrapper .code-copy-button{right:0;}@media screen and (min-width: 640px){.css-wmcuic .react-live-wrapper .code-copy-button{right:0;}}@media screen and (min-width: 768px){.css-wmcuic .react-live-wrapper .code-copy-button{right:0;}}@media screen and (min-width: 1024px){.css-wmcuic .react-live-wrapper .code-copy-button{right:-1rem;}}</style><style data-emotion="css 9jtvnm">.css-9jtvnm{box-sizing:border-box;margin:0;min-width:0;}.css-9jtvnm [data-name='live-editor']{padding:0.5rem!important;font-family:'menlo','monaco','monospace';font-size:0.5px;}.css-9jtvnm [data-name='live-preview']{padding:calc(0.5rem + 10px)!important;font-family:'menlo','monaco','monospace';background-color:#d2c7ec;}.css-9jtvnm .prism-code{font-size:14px;padding:2rem 1rem 1rem 1rem;webkit-overflow-scrolling:touch;background-color:var(--theme-ui-colors-transparent);min-width:100%;margin-bottom:0;margin-top:0;overflow:auto;}.css-9jtvnm .prism-code[data-linenumber="false"] .token-line{padding-left:1rem;}.css-9jtvnm .gatsby-highlight[data-language=''] .prism-code,.css-9jtvnm .gatsby-highlight[data-language='noLineNumbers'] .prism-code{padding-top:1rem;}.css-9jtvnm .token{display:inline-block;}.css-9jtvnm p>code,.css-9jtvnm li>code{background-color:var(--theme-ui-colors-gray-2);color:var(--theme-ui-colors-gray-8);padding-left:0.5rem;padding-right:0.5rem;padding-top:0.25rem;padding-bottom:0.25rem;border-radius:2px;}.css-9jtvnm .gatsby-highlight{font-size:1rem;position:relative;webkit-overflow-scrolling:touch;background-color:rgb(1, 22, 39);border-radius:2px;margin-left:0;margin-right:0;}@media screen and (min-width: 640px){.css-9jtvnm .gatsby-highlight{font-size:1rem;margin-left:0;margin-right:0;}}@media screen and (min-width: 768px){.css-9jtvnm .gatsby-highlight{font-size:1.25rem;margin-left:0;margin-right:0;}}@media screen and (min-width: 1024px){.css-9jtvnm .gatsby-highlight{margin-left:-1rem;margin-right:-1rem;}}.css-9jtvnm .gatsby-highlight .token-line{margin-left:-1rem;margin-right:-1rem;min-width:100%;}.css-9jtvnm .gatsby-highlight pre code{float:left;min-width:100%;}.css-9jtvnm .gatsby-highlight pre[class*="language-"]:before{background-color:var(--theme-ui-colors-white);border-radius:0 0 0.25rem 0.25rem;color:var(--theme-ui-colors-black);font-size:12px;letter-spacing:0.025rem;padding:0.1rem 0.5rem;position:absolute;left:1rem;text-align:right;text-transform:uppercase;top:0;}.css-9jtvnm .gatsby-highlight pre[class~="language-javascript"]:before,.css-9jtvnm .gatsby-highlight pre[class~="language-js"]:before{content:"js";background:#f7df1e;color:var(--theme-ui-colors-black);}.css-9jtvnm .gatsby-highlight pre[class~="language-jsx"]:before{content:"jsx";background:#61dafb;color:var(--theme-ui-colors-black);}.css-9jtvnm .gatsby-highlight pre[class~="language-ts"]:before{content:"ts";background:#61dafb;color:var(--theme-ui-colors-black);}.css-9jtvnm .gatsby-highlight pre[class~="language-tsx"]:before{content:"tsx";background:#61dafb;color:var(--theme-ui-colors-black);}.css-9jtvnm .gatsby-highlight pre[class~="language-html"]:before{content:"html";background:#005a9c;color:var(--theme-ui-colors-white);}.css-9jtvnm .gatsby-highlight pre[class~="language-xml"]:before{content:"xml";background:#005a9c;color:var(--theme-ui-colors-white);}.css-9jtvnm .gatsby-highlight pre[class~="language-svg"]:before{content:"svg";background:#005a9c;color:var(--theme-ui-colors-white);}.css-9jtvnm .gatsby-highlight pre[class~="language-graphql"]:before{content:"GraphQL";background:#E10098;}.css-9jtvnm .gatsby-highlight pre[class~="language-css"]:before{content:"css";background:#ff9800;color:var(--theme-ui-colors-black);}.css-9jtvnm .gatsby-highlight pre[class~="language-mdx"]:before{content:"mdx";background:#f9ac00;color:var(--theme-ui-colors-black);}.css-9jtvnm .gatsby-highlight pre[class~="language-php"]:before{content:"php";background:#777bb3;color:var(--theme-ui-colors-black);}.css-9jtvnm .gatsby-highlight pre[class~="language-py"]:before,.css-9jtvnm .gatsby-highlight pre[class~="language-python"]:before{content:"py";background:#306998;color:var(--theme-ui-colors-white);}.css-9jtvnm .gatsby-highlight pre[class~="language-text"]:before{content:"text";}.css-9jtvnm .gatsby-highlight pre[class~='language-shell']:before{content:'shell';}.css-9jtvnm .gatsby-highlight pre[class~='language-sh']:before{content:'sh';}.css-9jtvnm .gatsby-highlight pre[class~='language-bash']:before{content:'bash';}.css-9jtvnm .gatsby-highlight pre[class~='language-yaml']:before{content:'yaml';background:#ffa8df;}.css-9jtvnm .gatsby-highlight pre[class~='language-yml']:before{content:'yml';background:#ffa8df;}.css-9jtvnm .gatsby-highlight pre[class~='language-markdown']:before{content:'md';}.css-9jtvnm .gatsby-highlight pre[class~='language-json']:before,.css-9jtvnm .gatsby-highlight pre[class~='language-json5']:before{content:'json';background:linen;}.css-9jtvnm .gatsby-highlight pre[class~='language-diff']:before{content:'diff';background:#e6ffed;}.css-9jtvnm .gatsby-highlight>code[class*="language-"],.css-9jtvnm .gatsby-highlight>pre[class=*="language-"]{word-spacing:normal;word-break:normal;overflow-wrap:normal;line-height:1.5;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;}.css-9jtvnm .gatsby-highlight pre::-webkit-scrollbar{width:0.5rem;height:0.5rem;}.css-9jtvnm .gatsby-highlight pre::-webkit-scrollbar-thumb{background-color:var(--theme-ui-colors-primary);}.css-9jtvnm .gatsby-highlight pre::-webkit-scrollbar-track{background:rgb(1, 22, 39);}.css-9jtvnm .line-number-style{display:inline-block;width:3em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:0.3;text-align:center;position:relative;}.css-9jtvnm .code-title{background-color:#d2c7ec;color:var(--theme-ui-colors-black);font-size:0.875rem;padding-left:1rem;padding-right:1rem;padding-top:0.5rem;padding-bottom:0.5rem;font-family:Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;margin-left:0;margin-right:0;}@media screen and (min-width: 640px){.css-9jtvnm .code-title{margin-left:0;margin-right:0;}}@media screen and (min-width: 768px){.css-9jtvnm .code-title{margin-left:0;margin-right:0;}}@media screen and (min-width: 1024px){.css-9jtvnm .code-title{margin-left:-1rem;margin-right:-1rem;}}.css-9jtvnm .token-line{padding-right:1rem;}.css-9jtvnm .highlight-line{background-color:rgb(2, 55, 81);border-left:4px solid rgb(2, 155, 206);}.css-9jtvnm .highlight-line .line-number-style{width:calc(3em - 4px);opacity:0.5;left:-2px;}.css-9jtvnm .react-live-wrapper{position:relative;}.css-9jtvnm .react-live-wrapper .code-copy-button{right:0;}@media screen and (min-width: 640px){.css-9jtvnm .react-live-wrapper .code-copy-button{right:0;}}@media screen and (min-width: 768px){.css-9jtvnm .react-live-wrapper .code-copy-button{right:0;}}@media screen and (min-width: 1024px){.css-9jtvnm .react-live-wrapper .code-copy-button{right:-1rem;}}</style><div id="skip-nav" class=" css-9jtvnm"><style data-emotion="css 1v9r2d2">.css-1v9r2d2{height:48px;width:100%;}</style><div height="48" class="css-1v9r2d2"></div><style data-emotion="css 13rbtgt">.css-13rbtgt{margin:0 auto;}</style><style data-emotion="css xhcla6">.css-xhcla6{box-sizing:border-box;margin:0;min-width:0;font-family:inherit;font-weight:700;line-height:1.25;font-family:inherit;font-weight:700;line-height:1.25;margin:0;margin-bottom:0.25rem;font-size:1.875rem;margin-top:2rem;color:var(--theme-ui-colors-heading);margin:0 auto;}@media screen and (min-width: 640px){.css-xhcla6{font-size:2.25rem;}}@media screen and (min-width: 768px){.css-xhcla6{font-size:3rem;}}@media screen and (min-width: 1024px){.css-xhcla6{font-size:3rem;}}</style><h1 class="css-xhcla6">Redux-Persist에서 상태값이 병합되는 과정 살펴보기</h1><style data-emotion="css 19cwi87">.css-19cwi87{margin:0 auto;color:var(--theme-ui-colors-secondary);margin-top:1rem;font-size:0.5px;}.css-19cwi87 a{color:var(--theme-ui-colors-secondary);}@media screen and (min-width: 640px){.css-19cwi87{font-size:0.5px;}}@media screen and (min-width: 768px){.css-19cwi87{font-size:1rem;}}</style><p class="css-19cwi87"><time>28.08.2021</time> — <style data-emotion="css 11lb4ad">.css-11lb4ad{box-sizing:border-box;margin:0;min-width:0;color:var(--theme-ui-colors-primary);-webkit-text-decoration:none;text-decoration:none;font-size:0.5px;}.css-11lb4ad:hover{-webkit-text-decoration:underline;text-decoration:underline;}@media screen and (min-width: 640px){.css-11lb4ad{font-size:0.5px;}}@media screen and (min-width: 768px){.css-11lb4ad{font-size:1rem;}}</style><a class="css-11lb4ad" href="/tags/redux">redux</a>, <a class="css-11lb4ad" href="/tags/redux-persist">redux persist</a> — <span>2<!-- --> min read</span></p><div height="48" class="css-1v9r2d2"></div><style data-emotion="css vorgut">.css-vorgut{margin-top:4rem;margin-bottom:4rem;width:100%;margin:0 auto;}.css-vorgut .gatsby-resp-image-wrapper{margin-top:2rem;margin-bottom:2rem;box-shadow:rgba(0, 0, 0, 0.15) 0px 32px 32px 0px,rgba(0, 0, 0, 0.15) 0px 16px 16px 0px,rgba(0, 0, 0, 0.15) 0px 8px 8px 0px,rgba(0, 0, 0, 0.15) 0px 4px 4px 0px;}@media screen and (min-width: 640px){.css-vorgut .gatsby-resp-image-wrapper{margin-top:2rem;margin-bottom:2rem;}}@media screen and (min-width: 768px){.css-vorgut .gatsby-resp-image-wrapper{margin-top:4rem;margin-bottom:4rem;}}.css-vorgut img{display:block;width:100%;margin:0 auto;}.css-vorgut .gatsby-highlight{margin-top:2rem;margin-bottom:2rem;box-shadow:rgba(0, 0, 0, 0.15) 0px 32px 32px 0px,rgba(0, 0, 0, 0.15) 0px 16px 16px 0px,rgba(0, 0, 0, 0.15) 0px 8px 8px 0px,rgba(0, 0, 0, 0.15) 0px 4px 4px 0px;}@media screen and (min-width: 640px){.css-vorgut .gatsby-highlight{margin-top:2rem;margin-bottom:2rem;}}@media screen and (min-width: 768px){.css-vorgut .gatsby-highlight{margin-top:4rem;margin-bottom:4rem;}}</style><section class="css-vorgut"><style data-emotion="css 1ccrm8j">.css-1ccrm8j{font-size:1rem;letter-spacing:-0.003em;line-height:1.625;--baseline-multiplier:0.179;--x-height-multiplier:0.35;word-break:break-word;}@media screen and (min-width: 640px){.css-1ccrm8j{font-size:1rem;}}@media screen and (min-width: 768px){.css-1ccrm8j{font-size:1.25rem;}}</style><p class="css-1ccrm8j">최근, 구매 프로세스의 전반적인 액션과 상태를 관장하고 있는 <style data-emotion="css 1bw77fa">.css-1bw77fa{color:var(--theme-ui-colors-primary);-webkit-text-decoration:none;text-decoration:none;}.css-1bw77fa:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><a href="https://redux-toolkit.js.org/api/createslice" class="css-1bw77fa">Slice</a>가
직관적이지 못한 레거시 코드들로 인해 발목을 잡히게 되는 상황을 염려해
새롭게 리팩토링함과 동시에 죽은 코드들을 처내는 작업을 진행하게 되었습니다.</p><p class="css-1ccrm8j">구매 과정에 대한 정보들을 담고 있는 상태값들은 유저가 구매 중간 과정에서 이탈하게 되더라도 다시금 구매를 진행할 때 이전 단계를 반복하는 일이 없도록
Persist Store에서 관리하고 있었습니다.</p><p class="css-1ccrm8j">문제는, 리팩토링 이후 새로운 버전의 슬라이스로 대체되는 과정에서 발생되었는데요. 로컬 스토리지에 저장되어 있는 이전 버전의 상태값 구조가
새로운 버전의 상태값 구조와 충돌이 일어나는 문제였습니다.</p><style data-emotion="css 1o6lusp">.css-1o6lusp{font-family:inherit;font-weight:700;line-height:1.25;margin:0;margin-bottom:0.25rem;font-size:1.5rem;margin-top:2rem;color:var(--theme-ui-colors-heading);}@media screen and (min-width: 640px){.css-1o6lusp{font-size:1.875rem;}}@media screen and (min-width: 768px){.css-1o6lusp{font-size:1.875rem;}}@media screen and (min-width: 1024px){.css-1o6lusp{font-size:2.25rem;}}</style><h3 class="css-1o6lusp">Redux-Persist 기본 병합 방식</h3><style data-emotion="css 1ioa6cd">.css-1ioa6cd{border-left-color:var(--theme-ui-colors-primary);border-left-style:solid;border-left-width:6px;margin-left:0;margin-right:0;padding-left:2rem;}.css-1ioa6cd p{font-style:italic;}</style><blockquote class="css-1ioa6cd"><p class="css-1ccrm8j">들어가기 앞서, 로컬 혹은 세션 스토리지에 저장되어 있는 상태값 객체를 <code class="css-0">incomming state</code>, 현재 리듀서의 상태값 객체를 <code class="css-0">initial state</code> 라고 부르겠습니다.</p></blockquote><p class="css-1ccrm8j">incoming state와 intial state의 충돌이라 표현했지만,
충돌보단 &#x27;덮어쓰기&#x27; 라는 표현에 가깝습니다.</p><p class="css-1ccrm8j"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:692px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:53.75%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACbElEQVQozz2SyVIaURSG+x3YMEVBRIiIUyntEOapuxkUI6NMDQ10gyDRmCxMjJqlZm8q7l1FHyG+2Z86JykXt7pu3dvf+c93riCl0tjd2cWWKCKfy+Pw/SH29/axl99DOBjC2uoqZmZmYLFYYDabYbGYEdjchCzJkNISspksf2mfTCQhiKKIOacT/qUlKLLCwIPCAXLZHOx2O0wmE5wOJ2w2GwNtVivEQAAUJJVMcWGCEZj+F1wuF1+enZ1F8F2QgcXDItbX1uF2u+H1eBj8xm5/BVLqbXELXq/3FVopV5BRMhA8Cx5ux+FwIBwKoVQsoVwq8+qoKgxdRyKRgOU/jO6GgkHsbG9z+mgkiqFucFeUVNjc2IDVasWC2418LseVCEYXjmo19DQNsWiUQZSUUn+YTvH5/BParRa0roZmo8HeaQnLy8ucjsSTGxoM+Uun0gxu1OuQJYlhVNg1N4dYNIajao1h/V6f79WP6mg1mxCWfD645+fZj8/nQ6lYxPFohJPxBN+vbzA5HuPm6hpqW8X4eIxAIMCuJ+MJzs8+8jlpufx6iYdfDxBIMLVrt9nYx6A/wMlkAn0wwPRkCkWWUS6VOCkBOm0V8ViMp1qr1qAPdHZ9d3uL59/PEOjtkEeCSuk0T7nZaGJoGNA0jeGFQoHTUUvhUBj01BbfLmJ1ZYUDkPfrb1f4cXsHYWQMEY/F+ZD8KYqCaqUCrdvFz/t7vPx5wdnpKR4fH/H09IRkMgm/38/FDd1At9Ph6R4UCv8cfrm44FT0htRWG5FwGLIsc8LRcIh+r8fTJk9UiFqloXXVDp/TPhqJsIZcJou/1mGcGFOWpdUAAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image css-0" alt="redux-persist-intro" title="redux-persist-intro" src="/static/900705c290540e4e0ceac3a0ffce5451/b142a/redux-persist-intro.png" srcSet="/static/900705c290540e4e0ceac3a0ffce5451/5243c/redux-persist-intro.png 240w,/static/900705c290540e4e0ceac3a0ffce5451/ab158/redux-persist-intro.png 480w,/static/900705c290540e4e0ceac3a0ffce5451/b142a/redux-persist-intro.png 692w" sizes="(max-width: 692px) 100vw, 692px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
    </span></p><p class="css-1ccrm8j">페이지가 랜더링되는 직후 Redux-Persist에 의해 <code class="css-0">rehydrate</code> 액션이 발생되면, incoming state를 불러와
최상위 객체의 키(key)값을 비교해 일치하는 키의 value로 incoming state의 값을 세팅해버립니다.</p><p class="css-1ccrm8j">가령, 필요에 의해 리덕스 상태 객체에 새로운 키값을 추가하였지만, 컴포넌트 랜더링 직후 incoming state로 대체되니
컴포넌트단에서 새로운 키에 접근했을 때 타입에러가 발생하게 됩니다.</p><div class="gatsby-highlight" data-language="ts"><pre class="prism-code language-ts" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><style data-emotion="css dybovu">.css-dybovu{background-color:rgba(107,70,193,0.2);border:none;color:var(--theme-ui-colors-gray-2);cursor:pointer;font-size:14px;font-family:"IBM Plex Sans",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";letter-spacing:0.025rem;-webkit-transition:default;transition:default;position:absolute;top:0;right:0;z-index:1;border-radius:0 0 0 0.25rem;padding:0.25rem 0.6rem;}@media screen and (min-width: 640px){.css-dybovu{font-size:14px;}}@media screen and (min-width: 768px){.css-dybovu{font-size:16px;}}.css-dybovu[disabled]{cursor:not-allowed;}.css-dybovu:not([disabled]):hover{background-color:var(--theme-ui-colors-primary);color:var(--theme-ui-colors-white);}</style><button type="button" name="copy code to clipboard" class="code-copy-button css-dybovu">Copy<style data-emotion="css 15vf505">.css-15vf505{border:0;clip:rect(0, 0, 0, 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px;}</style><span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="language-ts"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1</span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// intial  state</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">2</span><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> initialState</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token maybe-class-name">UserState</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">3</span><span class="token plain">  user</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">4</span><span class="token plain">    id</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">5</span><span class="token plain">    name</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">6</span><span class="token plain">    email</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//newly added key</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">7</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">8</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">9</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">10</span><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// Access redux state value through redux hook in component</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">11</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">12</span><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// TypeError: Cannot read property &#x27;email&#x27; of undefined</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">13</span><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> email </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useSelector</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">state</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token maybe-class-name">RootState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">userReducer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">user</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></code></pre></div><p class="css-1ccrm8j">사실 다음 섹션에서 다루겠지만, <code class="css-0">autoMergeLevel1</code> 라는 설정값이 default로 설정되어 있어
위와 같은 병합 과정을 거치게 됩니다. (왜 이런 병합 방식이 디폴트인지는 아직 의문입니다..)</p><h3 class="css-1o6lusp">병합 과정을 살펴보자</h3><p class="css-1ccrm8j">Redux-Persist은 <code class="css-0">hardSet</code>, <code class="css-0">autoMergeLevel1</code>, <code class="css-0">autoMergeLevel2</code> 라는 세 가지 병합 방식을 제공합니다.
각각, incoming 혹은 initial state 중 어떤 값이 최종 세팅되는 상태값 객체의 키를 선점하는 지에 대한 기준으로 구분지을 수 있습니다.</p><p class="css-1ccrm8j"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:960px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:56.25%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA10lEQVQoz6WTiwqFMAhA+///DCp6v99ejuBYULtdriDqZmdTV3SepyDYkL7NiSzxm7zNiSxxnmfpuk7atpVxHHVzGAYXI/u+y7qusiyL2m3bnHU3NKfve0nTVOI4VvA0TZIkia5lWaYxHwIH2DSN1HUtVVWpAr4tGR+4JZgYDDAHAg2WbBYQp/OB33DWOQhlH/hxHOGhACmKQksoy9JBAdBL1vHpLTbPc1fJLZBNQECxlIf4AB+OMqhHICXQK1Nim65NFN9if7oXYOid/fpGLzf85w+xG34APDliAtemWpYAAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image css-0" alt="redux-persist-reconciler-overview" title="redux-persist-reconciler-overview" src="/static/2fcb57843dc5a36cd1bb4a8fe51092eb/7d769/redux-persist-reconciler-overview.png" srcSet="/static/2fcb57843dc5a36cd1bb4a8fe51092eb/5243c/redux-persist-reconciler-overview.png 240w,/static/2fcb57843dc5a36cd1bb4a8fe51092eb/ab158/redux-persist-reconciler-overview.png 480w,/static/2fcb57843dc5a36cd1bb4a8fe51092eb/7d769/redux-persist-reconciler-overview.png 960w,/static/2fcb57843dc5a36cd1bb4a8fe51092eb/87339/redux-persist-reconciler-overview.png 1440w,/static/2fcb57843dc5a36cd1bb4a8fe51092eb/88b03/redux-persist-reconciler-overview.png 1920w" sizes="(max-width: 960px) 100vw, 960px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
    </span></p><p class="css-1ccrm8j"><a href="https://github.com/rt2zz/redux-persist/blob/master/src/stateReconciler/autoMergeLevel1.js" class="css-1bw77fa">autoMergeLevel1</a>과
<a href="https://github.com/rt2zz/redux-persist/blob/master/src/stateReconciler/autoMergeLevel2.js" class="css-1bw77fa">autoMergeLevel2</a>의 차이를 보면,
단순히 incoming state를 세팅하는 지 혹은 incoming, initial state의 네임스페이스가 겹치지 않은 모든 키값을 살려
병합 후 세팅하는 지의 차이점을 확인 할 수 있습니다.</p><div class="gatsby-highlight" data-language="js"><pre class="prism-code language-js" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="copy code to clipboard" class="code-copy-button css-dybovu">Copy<span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="language-js"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1</span><span class="token keyword" style="color:rgb(127, 219, 202)">let</span><span class="token plain"> newState </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">reducedState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">2</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">3</span><span class="token plain"></span><span class="token known-class-name class-name" style="color:rgb(255, 203, 139)">Object</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">keys</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">inboundState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">forEach</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">key</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">4</span><span class="token plain">  </span><span class="token spread operator" style="color:rgb(127, 219, 202)">...</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">5</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">6</span><span class="token plain">  </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//[ autoMergeLevel1 ] Set incoming state on the matching key</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">7</span><span class="token plain">  newState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">key</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> inboundState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">key</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">8</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">9</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">10</span><span class="token plain">  </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//[ autoMergeLevel2 ] Set Merged state on the matching key</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">11</span><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">isPlainEnoughObject</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">reducedState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">key</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">12</span><span class="token plain">    </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// if object is plain enough shallow merge the new values (hence &quot;Level2&quot;)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">13</span><span class="token plain">    newState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">key</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token spread operator" style="color:rgb(127, 219, 202)">...</span><span class="token plain">newState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">key</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token spread operator" style="color:rgb(127, 219, 202)">...</span><span class="token plain">inboundState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">key</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">14</span><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(127, 219, 202)">return</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">15</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">16</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></code></pre></div><p class="css-1ccrm8j">결론적으로, CI 과정에서 Persist Store에서 관리되는 상태 객체는 얼마든지 추가, 제거될 여지가 존재하기 때문에
병합 과정을 이해하고 적절하게 선택해서 사용할 필요가 있습니다.</p><h3 class="css-1o6lusp">autoMergeLevel2는 문제 없는 것일까</h3><p class="css-1ccrm8j">autoMergeLevel2를 병합 방식으로 채택하면 initial state에 새로운 키가 추가되더라도 병합과정에서 이를 포함시키기 때문에
당장은 문제없이 동작합니다.</p><p class="css-1ccrm8j">반대로 initial state에 특정 키가 제거되어 더 이상 사용하지 않지만, 머지된 상태 객체가 다시금 로컬 혹은 세션 스토리지에 저장이 됩니다.
이후, 제거되었던 특정키와 동일한 네이밍의 새로운 키를 생성하여 다른 역할을 담당하게 했지만 incoming state에서
기다렸다는 듯이 키의 레거시 값을 세팅할 여지가 충분합니다.</p><p class="css-1ccrm8j">이러한 상황을 대비하기 위해 Redux-Persist에서는 <a href="https://github.com/rt2zz/redux-persist#migrations" class="css-1bw77fa">Migration</a>을 제공하고 있습니다.
버저닝을 통해 상태값 구조에 대한 변경 사항을 알리고, 병합 과정에서 이를 적용할 수 있도록 합니다.</p><div class="gatsby-highlight" data-language="js"><pre class="prism-code language-js" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="copy code to clipboard" class="code-copy-button css-dybovu">Copy<span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="language-js"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1</span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> migrations </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">2</span><span class="token plain">  </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">state</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">3</span><span class="token plain">    </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// migration clear out device state</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">4</span><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">5</span><span class="token plain">      </span><span class="token spread operator" style="color:rgb(127, 219, 202)">...</span><span class="token plain">state</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">6</span><span class="token plain">      device</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token keyword nil" style="color:rgb(127, 219, 202)">undefined</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">7</span><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">8</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">9</span><span class="token plain">  </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">state</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">10</span><span class="token plain">    </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// migration to keep only device state</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">11</span><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">12</span><span class="token plain">      device</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> state</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">device</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">13</span><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">14</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">15</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">16</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">17</span><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> persistConfig </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">18</span><span class="token plain">  key</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;primary&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">19</span><span class="token plain">  version</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">20</span><span class="token plain">  storage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">21</span><span class="token plain">  migrate</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">createMigrate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">migrations</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> debug</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">22</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></code></pre></div><h3 class="css-1o6lusp">마치면서</h3><p class="css-1ccrm8j">Persist Store에서 관리되는 상태값을 업데이트하면서 충돌한 경험을 정리해보았습니다. 종종 로직상 문제는 없지만,
외부적인 요소에 의해 이슈가 생기면 당황하게 되는데요. 개인적으로 먼저 시크릿창을 열어 확인하거나, 메뉴얼하게 캐시를 제거하곤 하는데
개발단계에서 캐시가 클린해져 해결된 문제가 유저에게 발생하지 않는다는 보장이 절대 없다는 것을 간과해서는 안되는 것을 다시금 느낍니다.</p><p class="css-1ccrm8j">Redux-Persist는 더 다양하게 커스텀하여 사용할 수 있으니, 기획에 맞게 적절한 지속적인 상태 유지 해보시길 바랍니다 :b</p></section></div><style data-emotion="css y7pay1">.css-y7pay1{box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin-top:8rem;color:var(--theme-ui-colors-secondary);-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;border-top-style:solid;border-top-width:1px;border-top-color:var(--theme-ui-colors-divide);padding-top:1rem;}.css-y7pay1 a{color:var(--theme-ui-colors-secondary);-webkit-text-decoration:none;text-decoration:none;}.css-y7pay1 a:hover{color:var(--theme-ui-colors-heading);-webkit-text-decoration:underline;text-decoration:underline;}.css-y7pay1 a:focus{color:var(--theme-ui-colors-heading);}@media screen and (min-width: 640px){.css-y7pay1{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}@media screen and (min-width: 768px){.css-y7pay1{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}}</style><footer class="css-y7pay1"><div>© <!-- -->2021<!-- --> by <!-- -->Brandon.dev<!-- -->. All rights reserved.</div><div><a aria-label="Link to the theme&#x27;s GitHub repository" href="https://github.com/LekoArts/gatsby-themes/tree/master/themes/gatsby-theme-minimal-blog" class="css-1fmmdck">Theme</a> <!-- -->by<!-- --> <a aria-label="Link to the theme author&#x27;s website" href="https://www.lekoarts.de?utm_source=minimal-blog&amp;utm_medium=Theme" class="css-1fmmdck">LekoArts</a></div></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/redux-persist에서-상태값이-병합되는-과정-살펴보기";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-fa0804c8b5908c72fe78.js"],"app":["/app-9fb5d100fc8b629a137d.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-72cd4c26ded1dc99c72d.js"],"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-blog-query-tsx":["/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-blog-query-tsx-4ae85156b6d203913f83.js"],"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-homepage-query-tsx":["/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-homepage-query-tsx-e183e1d47db91b14c542.js"],"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-page-query-tsx":["/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-page-query-tsx-221702c3d529743d44ff.js"],"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx":["/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-df0e23e2bcc1071b8546.js"],"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-tag-query-tsx":["/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-tag-query-tsx-8689433a913f3a025cc8.js"],"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-tags-query-tsx":["/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-tags-query-tsx-458d22e9bfeed754d6b1.js"]};/*]]>*/</script><script src="/polyfill-fa0804c8b5908c72fe78.js" nomodule=""></script><script src="/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-df0e23e2bcc1071b8546.js" async=""></script><script src="/aed2e917f30c051bccba91aa15989a75fd0bd633-7f9d1a61112c71c5629a.js" async=""></script><script src="/app-9fb5d100fc8b629a137d.js" async=""></script><script src="/framework-f3a47ef4a22d24b14274.js" async=""></script><script src="/webpack-runtime-98aa62c53ebfb5c24e72.js" async=""></script></body></html>